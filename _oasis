OASISFormat: 0.4
Name:        rewrite
Version:     0.20
Homepage:    https://github.com/c-cube/rewrite # FIXME
Authors:     Simon Cruanes
License:     BSD-2-clause
LicenseFile: LICENSE
Plugins:     META (0.3), DevFiles (0.3)
OCamlVersion: >= 4.00.1
BuildTools:  ocamlbuild
AlphaFeatures: compiled_setup_ml, ocamlbuild_more_args

XOCamlbuildExtraArgs: "-j 0 -use-menhir -menhir 'menhir --dump --explain --infer'"

Synopsis:  A rewrite system designed for maximal expressiveness

Flag notebook
  Description:      Jupyter notebook
  Default:          true

Library rewrite
  Pack:             true
  Path:             src/core/
  Modules:          Expr, Builtins, Parser, Lexer, Parse_loc, Slice, Bit_set
  BuildDepends:     bytes, result, containers, sequence, zarith

Executable cli
  Path:             src/cli/
  Install:          true
  CompiledObject:   native
  MainIs:           cli.ml
  BuildDepends:     rewrite, linenoise

Library ipython
  Path:             src/ipython/
  Pack:             true
  Install:          false
  Build$:           flag(notebook)
  Modules:          Base64, Ipython_json_j, Ipython_json_t, Log,
                    Message, Sockets
  BuildDepends:     rewrite, atdgen, yojson, uuidm, ZMQ, lwt-zmq,
                    lwt, lwt.unix, lwt.preemptive, threads, lwt.ppx, bytes

Executable ipython_server
  Path:             src/server/
  Install$:         flag(notebook)
  Build$:           flag(notebook)
  CompiledObject:   native
  MainIs:           ipython_server.ml
  BuildDepends:     ipython, rewrite, unix, threads

Executable run_tests
  Path:             tests/
  Install:          false
  MainIs:           run_tests.ml
  CompiledObject:   native
  Build$:           flag(tests)
  BuildDepends:     rewrite, oUnit

Test all
  Command:          ./run_tests.native
  TestTools:        run_tests
  Run$:             flag(tests)


